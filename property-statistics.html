<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Complete multilingual index of medicinal properties with plant counts and listings in English, Danish, and French">
        <title>Property Statistics - Materia Medica</title>
        <link rel="icon" type="image/svg+xml" href="favicon.svg">
        <link rel="stylesheet" href="styles.css">
        <script src="utils.js"></script>
        <script src="page-transition.js"></script>
        <script src="navigation.js" defer></script>
        <script src="footer.js" defer></script>
        <script src="plants-data.js"></script>
        <script src="property-statistics-renderer.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const searchInput = document.getElementById('property-search');
                const table = document.getElementById('property-table');
                const rows = table.getElementsByTagName('tr');
                const announcement = document.getElementById('search-results-announcement');
                
                let searchDebounce;
                searchInput.addEventListener('input', function() {
                    clearTimeout(searchDebounce);
                    searchDebounce = setTimeout(() => {
                        const filter = this.value.toLowerCase();
                        let visibleCount = 0;
                        
                        for (let i = 1; i < rows.length; i++) {
                            const rowText = rows[i].textContent.toLowerCase();
                            if (rowText.includes(filter)) {
                                rows[i].style.display = '';
                                rows[i].removeAttribute('aria-hidden');
                                visibleCount++;
                            } else {
                                rows[i].style.display = 'none';
                                rows[i].setAttribute('aria-hidden', 'true');
                            }
                        }
                        
                        // Announce results to screen readers
                        if (announcement) {
                            announcement.textContent = visibleCount + ' ' + (visibleCount === 1 ? 'result' : 'results') + ' found';
                        }
                    }, 300);
                });
            });
        </script>
    </head>

    <body>
        <a href="#main-content" class="skip-link">Skip to main content</a>
        <div class="container">
            <header>
                <h1>Medicinal Property Statistics</h1>
            </header>

            <div id="nav-placeholder"></div>

            <main id="main-content">
                <div class="stats-summary">
                    <div class="stat-box">
                        <div class="stat-number">...</div>
                        <div class="stat-label">Unique Properties</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number">...</div>
                        <div class="stat-label">Plants with Properties</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number">...</div>
                        <div class="stat-label">Total Plants</div>
                    </div>
                </div>

                <div class="search-box-stats">
                    <label for="property-search" class="visually-hidden">Search properties or plants</label>
                    <input 
                        type="text" 
                        id="property-search" 
                        placeholder="Search in any language: English, Dansk, Français..."
                        aria-label="Search properties or plants"
                    />
                    <div id="search-results-announcement" class="visually-hidden" role="status" aria-live="polite" aria-atomic="true"></div>
                </div>

                <table class="property-table" id="property-table">
                    <thead>
                        <tr>
                            <th>Property / Egenskab / Propriété</th>
                            <th>Count</th>
                            <th>Plants / Planter / Plantes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Property rows will be dynamically generated -->
                    </tbody>
                </table>
            </main>

            <div id="footer-placeholder"></div>
        </div>
    </body>

</html>